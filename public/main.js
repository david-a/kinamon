(function(){var e,n,r,t,i,u,o,a,c,s,m,l,p,f,d,h,v,w,g,k;o=$(".menu"),v=160,c="or.kinamon@gmail.com",u=function(){return $(window).height()>$(window).width()},i=function(){return u()||$(window).width()<=500},h=function(){return d(),$(".overlay").show(function(){return $(this).addClass("enabled",500)})},t=function(){return $(".overlay").fadeOut(400,function(){return $(this).removeClass("enabled")})},f=function(){return $(".form-wrapper").fadeOut(function(){return $(".order-approval").fadeIn(500).delay(3e3).fadeOut(100,function(){return t()})})},d=function(){return $(".form-wrapper").fadeIn()},r=function(){return $("#form-phone").val().length<9?($("#form-phone").addClass("error",600),!0):void 0},m=function(){var e;return e=!1,$.each(menus.recipe.elements,function(n,r){return r.name?void 0:($("li.line[data-value="+n+"] span").addClass("error",2e3),e=!0)}),e},n=function(e){return $(e).parents(".cake-part").attr("id")||"recipe"},w=function(e,n){var r,t;return null==n&&(n=!1),r=templates.menu(menus[e]),n?(t=$(templates.hiddenDiv(r)).appendTo("body"),o.animate({height:t.height(),width:t.width()},200,function(){return $(this).html(r).attr({style:""}),t.remove()})):o.html(r)},p=function(e,n){var r;return $.each(menus[e].elements,function(e,n){return n.klass=""}),menus[e].elements[n].klass="selected",r=$(".menu ul").scrollTop(),w(e),$(".menu ul").scrollTop(r)},k=function(e,n){return menus.recipe.elements[e].klass="selected",menus.recipe.elements[e].name=menus[e].elements[n].name,menus.recipe.elements[e].price=menus[e].elements[n].price},g=function(e,n){return $("#cake #"+e+" > g").replaceWith(menus[e].elements[n].svg),$(".cake-wrapper").html($(".cake-wrapper").html())},e=function(){var e;return e=$.map(menus.recipe.elements,function(e){return e.price}).reduce(function(e,n){return e+n},0),v+e},l=function(){return $.map(menus.recipe.elements,function(e){return""+e.prefix+": "+(e.name||"ללא")}).reduce(function(e,n){return e+" | "+n},"")},s=function(){var e;return e=$(window).height()-$(".header-wrapper").height(),i()&&(e-=o.height()),$(".cake-wrapper").css("padding",""+.05*e+"px 2vw").css("height",.9*e)},a=function(){return"chrome"in window?$(".header h1.title").html("עוּגָה בְּהַרְכָּבָה"):void 0},o.on("click","li",function(){return o.trigger("item:click",[$(this).closest(".menu-wrapper").data("type"),$(this).data("value")])}),o.on("click","a.submit",function(){return o.trigger("menu:submit",[$(this).closest(".menu-wrapper").data("type")])}),o.on("item:click",function(e,n,r){return"recipe"===n?w(r,!0):(p(n,r),k(n,r),g(n,r))}),o.on("menu:submit",function(n,r){var t;return"recipe"===r?(ga("send","event","cake-recipe","submit"),m()?(ga("send","event","cake-recipe","error"),!1):(t=e(),$(".form-show-total").html(t),$("#form-total").attr("value",t),$("#form-recipe").attr("value",l()),h())):(ga("send","event","cake-recipe","chosen-ingredient"),w("recipe",!0))}),$(".back-to-recipe").on("click",function(){return t()}),$("form.submit-cake-form input").on("focus",function(){return $(".error").removeClass("error")}),$("form.submit-cake-form, .menu").on("submit",function(e){var n;return ga("send","event","order-form","submit"),r()?(ga("send","event","order-form","error"),!1):(e.preventDefault(),n=$(this).serialize(),$.ajax({url:"//formspree.io/"+c,method:"POST",data:n,dataType:"json",complete:function(){return f()}}))}),$(".cake-wrapper").on("click",function(e){return w(n(e.target))}),$(window).on("resize",function(){return s()}),a(),w("recipe"),s()}).call(this);